
CREATE TABLE tb_branches(
    brSeq int NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    name VARCHAR(45) NOT NULL UNIQUE ,
    address VARCHAR(45),
    description VARCHAR(45),
    enabled boolean DEFAULT TRUE
);

CREATE TABLE tb_depart(
  departSeq int NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
  name VARCHAR(45) NOT NULL ,
  short_name VARCHAR(45) NOT NULL,
  description VARCHAR(45),
  brId INTEGER REFERENCES tb_branches(brSeq),
  enabled boolean DEFAULT TRUE
);

CREATE TABLE tb_positions(
     posSeq int NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
     posName VARCHAR,
     description VARCHAR,
     enabled boolean DEFAULT TRUE
);

CREATE TABLE tb_locations(
     locSeq int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
     name VARCHAR(45) NOT NULL,
     latitude VARCHAR(45) NOT NULL,
     longitude VARCHAR(45) NOT NULL,
     brId INTEGER REFERENCES tb_branches(brSeq),
     enabled boolean NOT NULL DEFAULT TRUE
);

CREATE TABLE tb_users(
     userSeq int NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
     fullName VARCHAR(45) NOT NULL ,
     username VARCHAR(45) NOT NULL UNIQUE,
     password VARCHAR(45) NOT NULL,
     userNum VARCHAR(45) NOT NULL,
     userType int, --admin user or normal user
     age int,
     gender int,
     email VARCHAR(45),
     phone VARCHAR(45),
     proImg VARCHAR,
     proImgPath VARCHAR,
     posId int REFERENCES tb_positions(posSeq),
     brId int REFERENCES tb_branches(brSeq),
     departId int REFERENCES tb_depart(departSeq),
     createDateTime VARCHAR,
     createId int,
     updateDateTime VARCHAR,
     updateId int,
     logCount int,
     enabled boolean
);

CREATE TABLE tb_user_groups(
    gSeq int NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    manageId int,
    memberId int,
    userId int
);

CREATE TABLE tb_user_log(
    logSeq int NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    act VARCHAR(45),
    actDt VARCHAR(45),
    userId int REFERENCES tb_users (userSeq)
);

CREATE TABLE tb_leave_types(
   leaveTySeq int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
   leaveName VARCHAR(45) NOT NULL,
   leaveDesc VARCHAR(100),
   numDayAllow int NOT NULL,
   userId int REFERENCES tb_users (userSeq),
   enabled boolean NOT NULL DEFAULT TRUE

);

CREATE TABLE tb_leave_app(
     appSeq int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
     referNum VARCHAR(45) NOT NULL,
     leaveTyId int,
     dateApp DATE NOT NULL,
     attachment text,
     leaveStatus int,
     remarks VARCHAR(100),
     dateApproval DATE,
     userId int REFERENCES tb_users(userSeq),
     enabled boolean DEFAULT TRUE
);

CREATE TABLE tb_user_reqLeave(
        reqLeaveSeq int NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
        type_leave VARCHAR NOT NULL,
        status VARCHAR NOT NULL,
        start_date VARCHAR NOT NULL,
        end_date VARCHAR NOT NULL,
        reason VARCHAR,
--         username VARCHAR,
        userId int REFERENCES tb_users(userSeq),         /*relationship*/
        enabled BOOLEAN DEFAULT TRUE

);


CREATE TABLE tb_admin_reqLeave(

        adminReqLeaveSeq int NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
        type_leave VARCHAR NOT NULL,
        status VARCHAR NOT NULL,
        start_date VARCHAR NOT NULL,
        end_date VARCHAR NOT NULL,
        reason VARCHAR,
--         username VARCHAR,
        userId int REFERENCES tb_users(userSeq),         /*relationship*/
        enabled BOOLEAN DEFAULT TRUE

);





CREATE TABLE tb_attn(
    attnSeq int NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    userNum VARCHAR,
    attnType VARCHAR,
    attnDt VARCHAR,
    createBy VARCHAR,
    createBt VARCHAR,
    approveBy VARCHAR,
    approveDt VARCHAR,
    userId int REFERENCES tb_users(userSeq)
);


-- create default username and password login system
INSERT INTO tb_positions (posname,description,enabled) VALUES('default','default',true);
INSERT INTO tb_branches(name,address,description,enabled) VALUES('default','default','default',true);
INSERT INTO tb_depart(name,short_name,brid,enabled) VALUES('default','default',1,true);
INSERT INTO tb_users (username, fullName,userNum, password,userType,age,gender,email,phone,proImg,
                      proImgPath,posId,brId,departId,createDateTime,createId,updateDateTime,updateId,
                      logCount,enabled)
VALUES ('admin','user admin','default', '123',0,0,0,'example@gmail.com','0','0','0'
       ,1,1,1,'0',0,'0',0,0,TRUE);
